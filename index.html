<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Brainstorm Buddy</title>

  <!-- Favicon -->
  <link rel="icon" type="image/png" sizes="32x32" href="smallicon.png">
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    :root {
      --primary: #6c63ff;
      --accent: #a259ff;
      --bg-light: #f5f4fa;
      --bg-dark: #1a1a1a;
      --text-light: #333;
      --text-dark: #f0f0f0;
      --muted-light: #666;
      --muted-dark: #aaa;
      --white: #ffffff;
    }
    * { box-sizing: border-box; }
    body { margin: 0; padding: 0; font-family: 'Inter', sans-serif; background: var(--bg-light); color: var(--text-light); transition: background 0.3s, color 0.3s; line-height: 1; }
    body.dark { background: var(--bg-dark); color: var(--text-dark); }

    header {
      background: linear-gradient(to right, var(--accent), var(--primary));
      padding: 1rem 2rem;
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      align-items: center;
      color: white;
    }
    .nav-left, .nav-right { display: flex; align-items: center; gap: 0.75rem; flex-wrap: wrap; }
    .logo { width: 40px; height: 40px; cursor: pointer; }

    .btn, .switcher {
      padding: 0.5rem 1rem; border-radius: 8px; font-weight: 600; font-size: 0.95rem;
      cursor: pointer; border: none; transition: background 0.2s, color 0.2s;
    }
    .btn.primary { background: white; color: var(--primary); }
    .btn.primary:hover { background: #eae8ff; }
    .btn.outline, .switcher { background: transparent; color: white; border: 1px solid white; }
    .btn.outline:hover, .switcher:hover { background: rgba(255,255,255,0.1); }

    main { text-align: center; padding: 3rem 1rem 2rem; max-width: 900px; margin: auto; }
    main img { width: 100px; margin-bottom: 1rem; cursor: pointer; }
    main h1 { font-size: 2.5rem; font-weight: 700; margin-bottom: 0.35rem; }
    main p { font-size: 1.2rem; color: var(--muted-light); max-width: 700px; margin: 0.25rem auto 0; }
    #welcome { margin-top: 0.25rem; font-weight: 600; }

    body.dark main p { color: var(--muted-dark); }

    section { padding: 2rem 1rem; max-width: 900px; margin: auto; }
    h2 { font-size: 1.75rem; color: var(--primary); margin-bottom: 1.25rem; text-align: center; }
    ul, ol { text-align: left; padding-left: 1.2rem; font-size: 1rem; }

    .use-cases-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 1.5rem; margin-top: 1.5rem; }
    .card { background: var(--white); color: var(--text-light); border-radius: 12px; padding: 1.5rem; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05); text-align: left; }
    body.dark .card { background: #2a2a2a; color: var(--text-dark); }

    .cta { background: var(--primary); color: white; border-radius: 16px; padding: 2rem; text-align: center; margin: 2rem auto; max-width: 900px; }
    .cta h2, .cta p { color: white !important; }
    .cta button { margin-top: 1rem; background: white; color: var(--primary); }
    .cta button:hover { background: #f0efff; }

    footer { padding: 2rem; text-align: center; font-size: 0.9rem; background: #fafafa; color: var(--muted-light); }
    footer a { color: var(--primary); margin: 0 0.75rem; text-decoration: none; }
    footer a:hover { text-decoration: underline; }

    .profile-container { margin-left: 1rem; }
    .dropdown { display:none; position:absolute; right:0; top:2.5rem; background:white; color:#333; border-radius:6px; box-shadow:0 2px 10px rgba(0,0,0,0.1); z-index:10; min-width:220px; }
    .dropdown a, .dropdown div { display:block; padding:0.6rem 1rem; text-decoration:none; color:#333; }

    @media (max-width: 600px) {
      header { flex-direction: column; align-items: stretch; padding: 1rem; }
      .nav-left, .nav-right { justify-content: center; width: 100%; }
      .nav-left button, .nav-right button, .nav-right select { flex: 1 1 auto; min-width: 100px; }
      .logo { margin-bottom: 0.5rem; }
    }
  </style>

  <script>
    // Global API base (prod -> your API domain)
    window.API_BASE ??= (location.hostname.includes('localhost') || location.hostname.startsWith('127.'))
      ? 'http://127.0.0.1:5050'
      : 'https://api.brainstormbuddy.co.uk';
    const API_BASE = window.API_BASE;
  </script>
</head>
<body>
  <header>
    <div class="nav-left">
      <img src="icon128.png" alt="Logo" class="logo" onclick="location.href='index.html'" />
      <button id="addBtn" class="btn primary">Add to Chrome</button>
      <button id="loginBtn" class="btn outline">Login</button>
    </div>
    <div class="nav-right">
      <button id="pricingBtn" class="btn outline">Pricing</button>
      <button id="aboutBtn" class="btn outline">About</button>
      <button class="switcher" onclick="toggleDarkMode()">ğŸŒ™</button>
      <select class="switcher" id="langSelect">
        <option value="en">EN</option>
        <option value="es">ES</option>
        <option value="fr">FR</option>
        <option value="ru">RU</option>
        <option value="it">IT</option>
        <option value="pt">PT</option>
      </select>
    </div>
  </header>

  <main>
    <img src="icon128.png" alt="Brainstorm Buddy Icon" onclick="location.href='index.html'" />
    <h1 id="headline">Boost Your Productivity</h1>
    <p id="subtext">Your favorite Chrome Extension for AI-powered brainstorming and smart note-taking.</p>
    <p id="welcome"></p>
  </main>

  <section>
    <h2 id="featuresTitle">âœ¨ Features</h2>
    <ul>
      <li id="feature1">ğŸ§  Instantly generate ideas using AI</li>
      <li id="feature2">ğŸ“ Write and organize your own notes</li>
      <li id="feature3">ğŸ“ Export or import your notes anytime</li>
      <li id="feature4">âš¡ Super lightweight and fast in your browser</li>
    </ul>
  </section>

  <section>
    <h2 id="howTitle">ğŸ“Œ How It Works</h2>
    <ol>
      <li id="step1">Install the extension on Chrome</li>
      <li id="step2">Click the Brainstorm Buddy icon</li>
      <li id="step3">Generate ideas with AI or write your own</li>
      <li id="step4">Save, export, or import your notes</li>
    </ol>
  </section>

  <section>
    <h2 id="usecasesTitle">ğŸ¯ Perfect For</h2>
    <div class="use-cases-grid">
      <div class="card">
        <h3 id="studentTitle">ğŸ§‘â€ğŸ“ Students</h3>
        <p id="studentDesc">Quickly brainstorm essay ideas, project outlines, and study notes.</p>
      </div>
      <div class="card">
        <h3 id="writerTitle">âœï¸ Writers</h3>
        <p id="writerDesc">Get past creative blocks and develop fresh story or content ideas.</p>
      </div>
      <div class="card">
        <h3 id="entrepreneurTitle">ğŸ’¡ Entrepreneurs</h3>
        <p id="entrepreneurDesc">Jot down business ideas, product features, and customer pain points.</p>
      </div>
      <div class="card">
        <h3 id="professionalTitle">ğŸ‘” Professionals & Employers</h3>
        <p id="professionalDesc">Streamline reports, prep for meetings, draft emails, and generate ideas for team improvement.</p>
      </div>
      <div class="card">
        <h3 id="marketerTitle">ğŸ›ï¸ Marketers & Content Creators</h3>
        <p id="marketerDesc">Plan social media content, brainstorm campaigns, and draft blog post ideas effortlessly.</p>
      </div>
      <div class="card">
        <h3 id="developerTitle">ğŸ§‘â€ğŸ’» Developers & Techies</h3>
        <p id="developerDesc">Jot down code snippets, write pseudocode, and log feature ideas or bugs during research or development.</p>
      </div>
    </div>
  </section>

  <section class="cta">
    <h2 id="ctaTitle">Ready to turn ideas into action?</h2>
    <p id="ctaDesc">Install Brainstorm Buddy and start brainstorming smarter, not harder.</p>
    <button class="btn primary" onclick="window.open('https://chromewebstore.google.com/', '_blank')">â• Add to Chrome</button>
  </section>

  <footer>
    <a id="footerPrivacy" href="privacy.html">Privacy Policy</a>
    <a id="footerTerms" href="terms.html">Terms of Service</a>
    <a id="footerContact" href="contact.html">Contact Us</a>
    <a id="footerSupport" href="support.html">Support Us</a>
  </footer>

  <script>
    // ========= i18n =========
    const translations = {
      en: {
        addBtn:"Add to Chrome", loginBtn:"Login", pricingBtn:"Pricing", aboutBtn:"About",
        headline:"Boost Your Productivity", subtext:"Your favorite Chrome Extension for AI-powered brainstorming and smart note-taking.",
        featuresTitle:"âœ¨ Features", feature1:"ğŸ§  Instantly generate ideas using AI", feature2:"ğŸ“ Write and organize your own notes",
        feature3:"ğŸ“ Export or import your notes anytime", feature4:"âš¡ Super lightweight and fast in your browser",
        howTitle:"ğŸ“Œ How It Works", step1:"Install the extension on Chrome", step2:"Click the Brainstorm Buddy icon",
        step3:"Generate ideas with AI or write your own", step4:"Save, export, or import your notes",
        usecasesTitle:"ğŸ¯ Perfect For", studentTitle:"ğŸ§‘â€ğŸ“ Students", studentDesc:"Quickly brainstorm essay ideas, project outlines, and study notes.",
        writerTitle:"âœï¸ Writers", writerDesc:"Get past creative blocks and develop fresh story or content ideas.",
        entrepreneurTitle:"ğŸ’¡ Entrepreneurs", entrepreneurDesc:"Jot down business ideas, product features, and customer pain points.",
        professionalTitle:"ğŸ‘” Professionals & Employers", professionalDesc:"Streamline reports, prep for meetings, draft emails, and generate ideas for team improvement.",
        marketerTitle:"ğŸ›ï¸ Marketers & Content Creators", marketerDesc:"Plan social media content, brainstorm campaigns, and draft blog post ideas effortlessly.",
        developerTitle:"ğŸ§‘â€ğŸ’» Developers & Techies", developerDesc:"Jot down code snippets, write pseudocode, and log feature ideas or bugs during research or development.",
        ctaTitle:"Ready to turn ideas into action?", ctaDesc:"Install Brainstorm Buddy and start brainstorming smarter, not harder.",
        footerPrivacy:"Privacy Policy", footerTerms:"Terms of Service", footerContact:"Contact Us", footerSupport:"Support Us"
      },
      es:{addBtn:"Agregar a Chrome",loginBtn:"Iniciar sesiÃ³n",pricingBtn:"Precios",aboutBtn:"Acerca de",
        headline:"Aumenta tu productividad",subtext:"Tu extensiÃ³n favorita para lluvia de ideas con IA.",
        featuresTitle:"âœ¨ Funciones",feature1:"ğŸ§  Genera ideas con IA",feature2:"ğŸ“ Escribe tus notas",
        feature3:"ğŸ“ Exporta o importa tus notas",feature4:"âš¡ Ligera y rÃ¡pida",
        howTitle:"ğŸ“Œ CÃ³mo funciona",step1:"Instala la extensiÃ³n",step2:"Haz clic en el icono",step3:"Genera ideas o escribe",step4:"Guarda o exporta tus notas",
        usecasesTitle:"ğŸ¯ Perfecto para",studentTitle:"ğŸ§‘â€ğŸ“ Estudiantes",studentDesc:"Ideas para ensayos y estudios",
        writerTitle:"âœï¸ Escritores",writerDesc:"Supera bloqueos creativos",
        entrepreneurTitle:"ğŸ’¡ Emprendedores",entrepreneurDesc:"Anota ideas y problemas de clientes",
        professionalTitle:"ğŸ‘” Profesionales y Empleadores",professionalDesc:"Optimiza informes, prepara reuniones, redacta correos y genera ideas para mejorar el equipo.",
        marketerTitle:"ğŸ›ï¸ Marketeros y Creadores de Contenido",marketerDesc:"Planifica contenido en redes sociales, ideas de campaÃ±as y borradores de blogs fÃ¡cilmente.",
        developerTitle:"ğŸ§‘â€ğŸ’» Desarrolladores y TÃ©cnicos",developerDesc:"Anota fragmentos de cÃ³digo, escribe pseudocÃ³digo y registra ideas o errores.",
        ctaTitle:"Â¿Listo para empezar?",ctaDesc:"Instala Brainstorm Buddy ahora",
        footerPrivacy:"PolÃ­tica de privacidad",footerTerms:"TÃ©rminos del servicio",footerContact:"ContÃ¡ctanos",footerSupport:"ApÃ³yanos"
      },
      fr:{addBtn:"Ajouter Ã  Chrome",loginBtn:"Connexion",pricingBtn:"Tarifs",aboutBtn:"Ã€ propos",
        headline:"Boostez votre productivitÃ©",subtext:"Extension Chrome pour prise de notes intelligente.",
        featuresTitle:"âœ¨ FonctionnalitÃ©s",feature1:"ğŸ§  GÃ©nÃ©rez des idÃ©es avec l'IA",feature2:"ğŸ“ Organisez vos notes",
        feature3:"ğŸ“ Exportez ou importez vos notes",feature4:"âš¡ Rapide et lÃ©gÃ¨re",
        howTitle:"ğŸ“Œ Comment Ã§a marche",step1:"Installez l'extension",step2:"Cliquez sur l'icÃ´ne",step3:"GÃ©nÃ©rez ou Ã©crivez",step4:"Sauvegardez vos notes",
        usecasesTitle:"ğŸ¯ IdÃ©al pour",studentTitle:"ğŸ§‘â€ğŸ“ Ã‰tudiants",studentDesc:"IdÃ©es de projets et Ã©tudes",
        writerTitle:"âœï¸ Ã‰crivains",writerDesc:"DÃ©bloquez votre crÃ©ativitÃ©",entrepreneurTitle:"ğŸ’¡ Entrepreneurs",entrepreneurDesc:"Notez vos idÃ©es de produits",
        professionalTitle:"ğŸ‘” Professionnels et Employeurs",professionalDesc:"Simplifiez les rapports, prÃ©parez les rÃ©unions, rÃ©digez des e-mails et trouvez des idÃ©es.",
        marketerTitle:"ğŸ›ï¸ Marketeurs & CrÃ©ateurs de contenu",marketerDesc:"Planifiez du contenu social, imaginez des campagnes et des brouillons de blogs.",
        developerTitle:"ğŸ§‘â€ğŸ’» DÃ©veloppeurs & Technophiles",developerDesc:"Notez des extraits de code, Ã©crivez du pseudocode et consignez des idÃ©es ou bugs.",
        ctaTitle:"PrÃªt Ã  agir ?",ctaDesc:"Installez Brainstorm Buddy",footerPrivacy:"Politique de confidentialitÃ©",
        footerTerms:"Conditions d'utilisation",footerContact:"Contactez-nous",footerSupport:"Soutenez-nous"
      },
      ru:{addBtn:"Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ² Chrome",loginBtn:"Ğ’Ğ¾Ğ¹Ñ‚Ğ¸",pricingBtn:"Ğ¦ĞµĞ½Ñ‹",aboutBtn:"Ğ Ğ½Ğ°Ñ",
        headline:"ĞŸĞ¾Ğ²Ñ‹ÑˆĞ°Ğ¹Ñ‚Ğµ Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚ÑŒ",subtext:"Ğ’Ğ°Ñˆ Ğ¿Ğ¾Ğ¼Ğ¾Ñ‰Ğ½Ğ¸Ğº Ğ´Ğ»Ñ Ğ¼Ğ¾Ğ·Ğ³Ğ¾Ğ²Ğ¾Ğ³Ğ¾ ÑˆÑ‚ÑƒÑ€Ğ¼Ğ°",
        featuresTitle:"âœ¨ Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¸",feature1:"ğŸ§  Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ğ¸Ğ´ĞµĞ¹ Ñ Ğ˜Ğ˜",feature2:"ğŸ“ ĞÑ€Ğ³Ğ°Ğ½Ğ¸Ğ·ÑƒĞ¹Ñ‚Ğµ ÑĞ²Ğ¾Ğ¸ Ğ·Ğ°Ğ¼ĞµÑ‚ĞºĞ¸",
        feature3:"ğŸ“ Ğ­ĞºÑĞ¿Ğ¾Ñ€Ñ‚ Ğ¸ Ğ¸Ğ¼Ğ¿Ğ¾Ñ€Ñ‚",feature4:"âš¡ Ğ‘Ñ‹ÑÑ‚Ñ€Ğ°Ñ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°",
        howTitle:"ğŸ“Œ ĞšĞ°Ğº ÑÑ‚Ğ¾ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚",step1:"Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚Ğµ Ñ€Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ¸Ğµ",step2:"ĞĞ°Ğ¶Ğ¼Ğ¸Ñ‚Ğµ Ğ½Ğ° Ğ¸ĞºĞ¾Ğ½ĞºÑƒ",step3:"Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹Ñ‚Ğµ Ğ¸Ğ»Ğ¸ Ğ½Ğ°Ğ¿Ğ¸ÑˆĞ¸Ñ‚Ğµ",step4:"Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚Ğµ Ğ·Ğ°Ğ¼ĞµÑ‚ĞºĞ¸",
        usecasesTitle:"ğŸ¯ Ğ˜Ğ´ĞµĞ°Ğ»ÑŒĞ½Ğ¾ Ğ´Ğ»Ñ",studentTitle:"ğŸ§‘â€ğŸ“ Ğ¡Ñ‚ÑƒĞ´ĞµĞ½Ñ‚Ñ‹",studentDesc:"Ğ˜Ğ´ĞµĞ¸ Ğ¸ Ğ·Ğ°Ğ¼ĞµÑ‚ĞºĞ¸ Ğ´Ğ»Ñ ÑƒÑ‡ĞµĞ±Ñ‹",
        writerTitle:"âœï¸ ĞŸĞ¸ÑĞ°Ñ‚ĞµĞ»Ğ¸",writerDesc:"ĞŸÑ€ĞµĞ¾Ğ´Ğ¾Ğ»ĞµĞ¹Ñ‚Ğµ Ñ‚Ğ²Ğ¾Ñ€Ñ‡ĞµÑĞºĞ¸Ğµ Ğ±Ğ»Ğ¾ĞºĞ¸",
        entrepreneurTitle:"ğŸ’¡ ĞŸÑ€ĞµĞ´Ğ¿Ñ€Ğ¸Ğ½Ğ¸Ğ¼Ğ°Ñ‚ĞµĞ»Ğ¸",entrepreneurDesc:"Ğ—Ğ°Ğ¿Ğ¸ÑÑ‹Ğ²Ğ°Ğ¹Ñ‚Ğµ Ğ¸Ğ´ĞµĞ¸ Ğ¸ Ñ„Ğ¸Ñ‡Ğ¸",
        professionalTitle:"ğŸ‘” ĞŸÑ€Ğ¾Ñ„ĞµÑÑĞ¸Ğ¾Ğ½Ğ°Ğ»Ñ‹ Ğ¸ Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ¾Ğ´Ğ°Ñ‚ĞµĞ»Ğ¸",professionalDesc:"ĞÑ‚Ñ‡Ñ‘Ñ‚Ñ‹, Ğ²ÑÑ‚Ñ€ĞµÑ‡Ğ¸, Ğ¿Ğ¸ÑÑŒĞ¼Ğ° Ğ¸ Ğ¸Ğ´ĞµĞ¸ Ğ´Ğ»Ñ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹.",
        marketerTitle:"ğŸ›ï¸ ĞœĞ°Ñ€ĞºĞµÑ‚Ğ¾Ğ»Ğ¾Ğ³Ğ¸ Ğ¸ ĞšĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚-ĞºÑ€Ğ¸ÑĞ¹Ñ‚Ğ¾Ñ€Ñ‹",marketerDesc:"ĞŸĞ»Ğ°Ğ½Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚, ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸ Ğ¸ Ñ‡ĞµÑ€Ğ½Ğ¾Ğ²Ğ¸ĞºĞ¸ ÑÑ‚Ğ°Ñ‚ĞµĞ¹.",
        developerTitle:"ğŸ§‘â€ğŸ’» Ğ Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸ĞºĞ¸ Ğ¸ Ğ¢ĞµÑ…Ğ½Ğ¸ĞºĞ¸",developerDesc:"Ğ¡Ğ½Ğ¸Ğ¿Ğ¿ĞµÑ‚Ñ‹ ĞºĞ¾Ğ´Ğ°, Ğ¿ÑĞµĞ²Ğ´Ğ¾ĞºĞ¾Ğ´ Ğ¸ Ğ·Ğ°Ğ¼ĞµÑ‚ĞºĞ¸ Ğ¾ Ğ±Ğ°Ğ³Ğ°Ñ….",
        ctaTitle:"Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ñ‹ Ğ½Ğ°Ñ‡Ğ°Ñ‚ÑŒ?",ctaDesc:"Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚Ğµ Brainstorm Buddy",
        footerPrivacy:"ĞŸĞ¾Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ° ĞºĞ¾Ğ½Ñ„Ğ¸Ğ´ĞµĞ½Ñ†Ğ¸Ğ°Ğ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸",footerTerms:"Ğ£ÑĞ»Ğ¾Ğ²Ğ¸Ñ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ",footerContact:"Ğ¡Ğ²ÑĞ·Ğ°Ñ‚ÑŒÑÑ Ñ Ğ½Ğ°Ğ¼Ğ¸",footerSupport:"ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ°Ñ‚ÑŒ Ğ½Ğ°Ñ"
      },
      it:{addBtn:"Aggiungi a Chrome",loginBtn:"Accedi",pricingBtn:"Prezzi",aboutBtn:"Chi siamo",
        headline:"Aumenta la produttivitÃ ",subtext:"Estensione per brainstorming intelligente",
        featuresTitle:"âœ¨ Caratteristiche",feature1:"ğŸ§  Genera idee con l'IA",feature2:"ğŸ“ Organizza le tue note",
        feature3:"ğŸ“ Esporta o importa",feature4:"âš¡ Veloce e leggera",
        howTitle:"ğŸ“Œ Come funziona",step1:"Installa l'estensione",step2:"Clicca sull'icona",step3:"Genera o scrivi",step4:"Salva le note",
        usecasesTitle:"ğŸ¯ Perfetto per",studentTitle:"ğŸ§‘â€ğŸ“ Studenti",studentDesc:"Appunti e idee per lo studio",
        writerTitle:"âœï¸ Scrittori",writerDesc:"Supera i blocchi creativi",
        entrepreneurTitle:"ğŸ’¡ Imprenditori",entrepreneurDesc:"Scrivi idee di business",
        professionalTitle:"ğŸ‘” Professionisti e Datori di lavoro",professionalDesc:"Report, riunioni, e-mail e idee per il team.",
        marketerTitle:"ğŸ›ï¸ Marketer e Creatori di Contenuti",marketerDesc:"Post social, campagne e bozze di blog.",
        developerTitle:"ğŸ§‘â€ğŸ’» Sviluppatori & Tecnici",developerDesc:"Snippet di codice, pseudocodice e idee/bug.",
        ctaTitle:"Pronto ad agire?",ctaDesc:"Installa Brainstorm Buddy",
        footerPrivacy:"Privacy",footerTerms:"Termini",footerContact:"Contattaci",footerSupport:"Sostienici"
      },
      pt:{addBtn:"Adicionar ao Chrome",loginBtn:"Entrar",pricingBtn:"PreÃ§os",aboutBtn:"Sobre",
        headline:"Aumente sua produtividade",subtext:"ExtensÃ£o de anotaÃ§Ãµes inteligentes com IA.",
        featuresTitle:"âœ¨ Recursos",feature1:"ğŸ§  Ideias com IA",feature2:"ğŸ“ Organize suas notas",
        feature3:"ğŸ“ Exporte ou importe",feature4:"âš¡ RÃ¡pida e leve",
        howTitle:"ğŸ“Œ Como funciona",step1:"Instale a extensÃ£o",step2:"Clique no Ã­cone",step3:"Gere ou escreva ideias",step4:"Salve suas anotaÃ§Ãµes",
        usecasesTitle:"ğŸ¯ Perfeito para",studentTitle:"ğŸ§‘â€ğŸ“ Estudantes",studentDesc:"Ideias e resumos",
        writerTitle:"âœï¸ Escritores",writerDesc:"Supere bloqueios criativos",entrepreneurTitle:"ğŸ’¡ Empreendedores",entrepreneurDesc:"Anote ideias de negÃ³cios",
        professionalTitle:"ğŸ‘” Profissionais e Empregadores",professionalDesc:"RelatÃ³rios, reuniÃµes, e-mails e ideias para o time.",
        marketerTitle:"ğŸ›ï¸ Marketing & Criadores",marketerDesc:"Posts sociais, campanhas e rascunhos.",
        developerTitle:"ğŸ§‘â€ğŸ’» Desenvolvedores & TÃ©cnicos",developerDesc:"Trechos de cÃ³digo, pseudocÃ³digo e ideias/bugs.",
        ctaTitle:"Pronto para agir?",ctaDesc:"Instale agora",
        footerPrivacy:"PolÃ­tica de Privacidade",footerTerms:"Termos de Uso",footerContact:"Contato",footerSupport:"Apoie-nos"
      }
    };

    function changeLanguage(lang) {
      const t = translations[lang] || translations.en;
      for (const key in t) {
        const el = document.getElementById(key);
        if (el) el.textContent = t[key];
      }
      localStorage.setItem('selectedLanguage', lang);
      document.getElementById('langSelect').value = lang;
    }

    function toggleDarkMode() { document.body.classList.toggle('dark'); }

    function toggleProfileMenu() {
      const menu = document.getElementById("profile-dropdown");
      if (menu) menu.style.display = menu.style.display === "block" ? "none" : "block";
    }

    async function logout() {
      try {
        await fetch(`${API_BASE}/logout`, { method: 'POST', credentials: 'include' });
      } catch {}
      localStorage.clear();
      location.href = 'login.html';
    }

    function formatPlan(plan){
      const p = String(plan || '').toLowerCase();
      if (!p || p === 'free') return 'Free';
      return p.charAt(0).toUpperCase() + p.slice(1);
    }

    async function fetchCurrentPlan(email){
      try{
        const res = await fetch(`${API_BASE}/api/subscription-status?email=${encodeURIComponent(email)}`, { credentials:'include' });
        if(!res.ok) throw new Error(`HTTP ${res.status}`);
        const data = await res.json();
        return formatPlan(data?.plan || 'Free');
      }catch{
        return 'Free';
      }
    }

    function insertProfileUI({ name, profileImage, plan }) {
      const navRight = document.querySelector(".nav-right");
      if (document.getElementById('profile-dropdown')) return; // already inserted

      const loginBtn = document.getElementById("loginBtn");
      if (loginBtn) loginBtn.style.display = "none";

      const profileDiv = document.createElement("div");
      profileDiv.className = "profile-container";
      profileDiv.innerHTML = `
        <div style="position: relative;">
          <button class="profile-trigger" onclick="toggleProfileMenu()" style="border: none; background: none;">
            <img id="profile-img" src="${profileImage || 'default-avatar.png'}" alt="Profile" style="width: 32px; height: 32px; border-radius: 50%;">
          </button>
          <div class="dropdown" id="profile-dropdown">
            <div><strong>${name ? name : 'Account'}</strong></div>
            <div class="plan-label">Plan: <span id="plan-span">${formatPlan(plan)}</span></div>
            <a href="billing.html">Billing & Plan</a>
            <a href="#" onclick="logout()">Logout</a>
          </div>
        </div>
      `;
      navRight.appendChild(profileDiv);
    }

    async function checkSessionAndRender() {
      try {
        const res = await fetch(`${API_BASE}/me`, { credentials: 'include' });
        const data = await res.json();

        if (res.ok && data.ok) {
          // Persist a bit for other pages
          localStorage.setItem('isLoggedIn','true');
          if (data.email) localStorage.setItem('userEmail', data.email);
          if (data.profileImage) localStorage.setItem('profileImage', data.profileImage);

          // UI: welcome + avatar
          document.getElementById('welcome').textContent = `Welcome, ${data.name || data.email}!`;
          insertProfileUI({ name: data.name || data.email, profileImage: data.profileImage, plan: data.plan });

          // Refresh plan label from server (authoritative)
          const plan = await fetchCurrentPlan(data.email);
          localStorage.setItem('userPlan', plan);
          const span = document.getElementById('plan-span');
          if (span) span.textContent = plan;
        } else {
          // Not signed in
          localStorage.removeItem('isLoggedIn');
          localStorage.removeItem('userEmail');
          localStorage.removeItem('profileImage');
          localStorage.removeItem('userPlan');
          document.getElementById('welcome').textContent = '';
          // show Login button (already visible by default)
        }
      } catch (e) {
        // Network or CORS issue â€” leave page usable
        console.warn('Session check failed:', e);
      }
    }

    // ====== Boot ======
    document.addEventListener("DOMContentLoaded", () => {
      // Language
      const lang = localStorage.getItem('selectedLanguage') || 'en';
      changeLanguage(lang);
      document.getElementById('langSelect').addEventListener('change', e => changeLanguage(e.target.value));

      // Nav buttons
      document.getElementById("addBtn")?.addEventListener("click", () => {
        window.open("https://chromewebstore.google.com/", "_blank");
      });
      document.getElementById("loginBtn")?.addEventListener("click", () => { location.href = "login.html"; });
      document.getElementById("pricingBtn")?.addEventListener("click", () => { location.href = "pricing.html"; });
      document.getElementById("aboutBtn")?.addEventListener("click", () => { location.href = "about.html"; });

      // Initial session check
      checkSessionAndRender();
    });

    // Keep plan fresh when returning
    window.addEventListener('focus', async () => {
      const email = localStorage.getItem('userEmail');
      if (email) {
        const plan = await fetchCurrentPlan(email);
        localStorage.setItem('userPlan', plan);
        const span = document.getElementById('plan-span');
        if (span) span.textContent = plan;
      } else {
        checkSessionAndRender();
      }
    });

    // Close dropdown when clicking outside
    window.addEventListener("click", function (e) {
      if (!e.target.closest(".profile-container")) {
        const menu = document.getElementById("profile-dropdown");
        if (menu) menu.style.display = "none";
      }
    });
  </script>
</body>
</html>
