<!DOCTYPE html>
<html lang="en">
<head>

<meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Brainstorm Buddy</title>

  <!-- ✅ Favicon -->
  <link rel="icon" type="image/png" sizes="32x32" href="smallicon.png">
  <!-- Optional: Add ICO fallback (if you ever create one) -->
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
 

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Brainstorm Buddy</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #6c63ff;
      --accent: #a259ff;
      --bg-light: #f5f4fa;
      --bg-dark: #1a1a1a;
      --text-light: #333;
      --text-dark: #f0f0f0;
      --muted-light: #666;
      --muted-dark: #aaa;
      --white: #ffffff;
    }
    * { box-sizing: border-box; }
    body { margin: 0; padding: 0; font-family: 'Inter', sans-serif; background: var(--bg-light); color: var(--text-light); transition: background 0.3s, color 0.3s; line-height: 1.;}
    body.dark { background: var(--bg-dark); color: var(--text-dark); }

    header {
      background: linear-gradient(to right, var(--accent), var(--primary));
      padding: 1rem 2rem;
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      align-items: center;
      color: white;
    }
    .nav-left, .nav-right { display: flex; align-items: center; gap: 0.75rem; flex-wrap: wrap; }
    .logo { width: 40px; height: 40px; cursor: pointer; }

    .btn, .switcher {
      padding: 0.5rem 1rem; border-radius: 8px; font-weight: 600; font-size: 0.95rem;
      cursor: pointer; border: none; transition: background 0.2s, color 0.2s;
    }
    .btn.primary { background: white; color: var(--primary); }
    .btn.primary:hover { background: #eae8ff; }
    .btn.outline, .switcher { background: transparent; color: white; border: 1px solid white; }
    .btn.outline:hover, .switcher:hover { background: rgba(255,255,255,0.1); }

    main { text-align: center; padding: 3rem 1rem 2rem; max-width: 900px; margin: auto; }
    main img { width: 100px; margin-bottom: 1rem; cursor: pointer; }
    main h1 { font-size: 2.5rem; font-weight: 700; margin-bottom: 1rem; }
    main p { font-size: 1.2rem; color: var(--muted-light); max-width: 600px; margin: 0 auto; }
    body.dark main p { color: var(--muted-dark); }

    section { padding: 2rem 1rem; max-width: 900px; margin: auto; }
    h2 { font-size: 1.75rem; color: var(--primary); margin-bottom: 1.25rem; text-align: center; }
    ul, ol { text-align: left; padding-left: 1.2rem; font-size: 1rem; }

    .use-cases-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 1.5rem; margin-top: 1.5rem; }
    .card { background: var(--white); color: var(--text-light); border-radius: 12px; padding: 1.5rem; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05); text-align: left; }
    body.dark .card { background: #2a2a2a; color: var(--text-dark); }

    .cta { background: var(--primary); color: white; border-radius: 16px; padding: 2rem; text-align: center; margin: 2rem auto; max-width: 900px; }
    .cta h2, .cta p { color: white !important; }
    .cta button { margin-top: 1rem; background: white; color: var(--primary); }
    .cta button:hover { background: #f0efff; }

    footer { padding: 2rem; text-align: center; font-size: 0.9rem; background: #fafafa; color: var(--muted-light); }
    footer a { color: var(--primary); margin: 0 0.75rem; text-decoration: none; }
    footer a:hover { text-decoration: underline; }

    .profile-container { margin-left: 1rem; }

    @media (max-width: 600px) {
      header { flex-direction: column; align-items: stretch; padding: 1rem; }
      .nav-left, .nav-right { justify-content: center; width: 100%; }
      .nav-left button, .nav-right button, .nav-right select { flex: 1 1 auto; min-width: 100px; }
      .logo { margin-bottom: 0.5rem; }
    }
  </style>
</head>
<body>
  <header>
    <div class="nav-left">
      <img src="icon128.png" alt="Logo" class="logo" onclick="location.href='index.html'" />
      <button id="addBtn" class="btn primary">Add to Chrome</button>
      <button id="loginBtn" class="btn outline">Login</button>
    </div>
    <div class="nav-right">
      <button id="pricingBtn" class="btn outline">Pricing</button>
      <button id="aboutBtn" class="btn outline">About</button>
      <button class="switcher" onclick="toggleDarkMode()">🌙</button>
      <select class="switcher" onchange="changeLanguage(this.value)">
        <option value="en">EN</option>
        <option value="es">ES</option>
        <option value="fr">FR</option>
        <option value="ru">RU</option>
        <option value="it">IT</option>
        <option value="pt">PT</option>
      </select>
    </div>
  </header>

  <main>
    <img src="icon128.png" alt="Brainstorm Buddy Icon" onclick="location.href='index.html'" />
    <h1 id="headline">Boost Your Productivity</h1>
    <p id="subtext">Your favorite Chrome Extension for AI-powered brainstorming and smart note-taking.</p>
  </main>

  <section>
    <h2 id="featuresTitle">✨ Features</h2>
    <ul>
      <li id="feature1">🧠 Instantly generate ideas using AI</li>
      <li id="feature2">📝 Write and organize your own notes</li>
      <li id="feature3">📁 Export or import your notes anytime</li>
      <li id="feature4">⚡ Super lightweight and fast in your browser</li>
    </ul>
  </section>

  <section>
    <h2 id="howTitle">📌 How It Works</h2>
    <ol>
      <li id="step1">Install the extension on Chrome</li>
      <li id="step2">Click the Brainstorm Buddy icon</li>
      <li id="step3">Generate ideas with AI or write your own</li>
      <li id="step4">Save, export, or import your notes</li>
    </ol>
  </section>

  <section>
    <h2 id="usecasesTitle">🎯 Perfect For</h2>
    <div class="use-cases-grid">
  <div class="card">
    <h3 id="studentTitle">🧑‍🎓 Students</h3>
    <p id="studentDesc">Quickly brainstorm essay ideas, project outlines, and study notes.</p>
  </div>
  <div class="card">
    <h3 id="writerTitle">✍️ Writers</h3>
    <p id="writerDesc">Get past creative blocks and develop fresh story or content ideas.</p>
  </div>
  <div class="card">
    <h3 id="entrepreneurTitle">💡 Entrepreneurs</h3>
    <p id="entrepreneurDesc">Jot down business ideas, product features, and customer pain points.</p>
  </div>
  <div class="card">
    <h3 id="professionalTitle">👔 Professionals & Employers</h3>
    <p id="professionalDesc">Streamline reports, prep for meetings, draft emails, and generate ideas for team improvement.</p>
  </div>
  <div class="card">
    <h3 id="marketerTitle">🛍️ Marketers & Content Creators</h3>
    <p id="marketerDesc">Plan social media content, brainstorm campaigns, and draft blog post ideas effortlessly.</p>
  </div>
  <div class="card">
    <h3 id="developerTitle">🧑‍💻 Developers & Techies</h3>
    <p id="developerDesc">Jot down code snippets, write pseudocode, and log feature ideas or bugs during research or development.</p>
  </div>
</div>
  </section>

  <section class="cta">
    <h2 id="ctaTitle">Ready to turn ideas into action?</h2>
    <p id="ctaDesc">Install Brainstorm Buddy and start brainstorming smarter, not harder.</p>
    <button class="btn primary" onclick="window.open('https://chromewebstore.google.com/', '_blank')">➕ Add to Chrome</button>
  </section>

  <footer>
    <a id="footerPrivacy" href="privacy.html">Privacy Policy</a>
    <a id="footerTerms" href="terms.html">Terms of Service</a>
    <a id="footerContact" href="contact.html">Contact Us</a>
    <a id="footerSupport" href="support.html">Support Us</a>
  </footer>

  <script>
    const API_BASE =
  (location.hostname.includes('localhost') || location.hostname.startsWith('127.'))
    ? 'http://127.0.0.1:5050'
    : 'https://auth-backend-b1b6.onrender.com';

    const translations = {
      en: {
        addBtn: "Add to Chrome",
        loginBtn: "Login",
        pricingBtn: "Pricing",
        aboutBtn: "About",
        headline: "Boost Your Productivity",
        subtext: "Your favorite Chrome Extension for AI-powered brainstorming and smart note-taking.",
        featuresTitle: "✨ Features",
        feature1: "🧠 Instantly generate ideas using AI",
        feature2: "📝 Write and organize your own notes",
        feature3: "📁 Export or import your notes anytime",
        feature4: "⚡ Super lightweight and fast in your browser",
        howTitle: "📌 How It Works",
        step1: "Install the extension on Chrome",
        step2: "Click the Brainstorm Buddy icon",
        step3: "Generate ideas with AI or write your own",
        step4: "Save, export, or import your notes",
        usecasesTitle: "🎯 Perfect For",
        studentTitle: "🧑‍🎓 Students",
        studentDesc: "Quickly brainstorm essay ideas, project outlines, and study notes.",
        writerTitle: "✍️ Writers",
        writerDesc: "Get past creative blocks and develop fresh story or content ideas.",
        entrepreneurTitle: "💡 Entrepreneurs",
        entrepreneurDesc: "Jot down business ideas, product features, and customer pain points.",
        professionalTitle: "👔 Professionals & Employers",
        professionalDesc: "Streamline reports, prep for meetings, draft emails, and generate ideas for team improvement.",
       marketerTitle: "🛍️ Marketers & Content Creators",
  marketerDesc: "Plan social media content, brainstorm campaigns, and draft blog post ideas effortlessly.",
  developerTitle: "🧑‍💻 Developers & Techies",
  developerDesc: "Jot down code snippets, write pseudocode, and log feature ideas or bugs during research or development.",
        ctaTitle: "Ready to turn ideas into action?",
        ctaDesc: "Install Brainstorm Buddy and start brainstorming smarter, not harder.",
        footerPrivacy: "Privacy Policy",
        footerTerms: "Terms of Service",
        footerContact: "Contact Us",
        footerSupport: "Support Us"
      },
      es: {
        addBtn: "Agregar a Chrome", loginBtn: "Iniciar sesión", pricingBtn: "Precios", aboutBtn: "Acerca de",
        headline: "Aumenta tu productividad", subtext: "Tu extensión favorita para lluvia de ideas con IA.",
        featuresTitle: "✨ Funciones", feature1: "🧠 Genera ideas con IA", feature2: "📝 Escribe tus notas",
        feature3: "📁 Exporta o importa tus notas", feature4: "⚡ Ligera y rápida",
        howTitle: "📌 Cómo funciona", step1: "Instala la extensión", step2: "Haz clic en el icono",
        step3: "Genera ideas o escribe", step4: "Guarda o exporta tus notas",
        usecasesTitle: "🎯 Perfecto para", studentTitle: "🧑‍🎓 Estudiantes", studentDesc: "Ideas para ensayos y estudios",
        writerTitle: "✍️ Escritores", writerDesc: "Supera bloqueos creativos", entrepreneurTitle: "💡 Emprendedores",
        entrepreneurDesc: "Anota ideas y problemas de clientes",
        professionalTitle: "👔 Profesionales y Empleadores",
        professionalDesc: "Optimiza informes, prepara reuniones, redacta correos y genera ideas para mejorar el equipo.",
       marketerTitle: "🛍️ Marketeros y Creadores de Contenido",
  marketerDesc: "Planifica contenido en redes sociales, ideas de campañas y borradores de blogs fácilmente.",
  developerTitle: "🧑‍💻 Desarrolladores y Técnicos",
  developerDesc: "Anota fragmentos de código, escribe pseudocódigo y registra ideas o errores durante la investigación o el desarrollo.",
        ctaTitle: "¿Listo para empezar?",
        ctaDesc: "Instala Brainstorm Buddy ahora", footerPrivacy: "Política de privacidad",
        footerTerms: "Términos del servicio", footerContact: "Contáctanos", footerSupport: "Apóyanos"
      },
      fr: {
        addBtn: "Ajouter à Chrome", loginBtn: "Connexion", pricingBtn: "Tarifs", aboutBtn: "À propos",
        headline: "Boostez votre productivité", subtext: "Extension Chrome pour prise de notes intelligente.",
        featuresTitle: "✨ Fonctionnalités", feature1: "🧠 Générez des idées avec l'IA", feature2: "📝 Organisez vos notes",
        feature3: "📁 Exportez ou importez vos notes", feature4: "⚡ Rapide et légère",
        howTitle: "📌 Comment ça marche", step1: "Installez l'extension", step2: "Cliquez sur l'icône",
        step3: "Générez ou écrivez", step4: "Sauvegardez vos notes",
        usecasesTitle: "🎯 Idéal pour", studentTitle: "🧑‍🎓 Étudiants", studentDesc: "Idées de projets et études",
        writerTitle: "✍️ Écrivains", writerDesc: "Débloquez votre créativité", entrepreneurTitle: "💡 Entrepreneurs",
        professionalTitle: "👔 Professionnels et Employeurs",
        professionalDesc: "Simplifiez les rapports, préparez les réunions, rédigez des e-mails et trouvez des idées pour améliorer l’équipe.",
        entrepreneurDesc: "Notez vos idées de produits", ctaTitle: "Prêt à agir ?", ctaDesc: "Installez Brainstorm Buddy",
       marketerTitle: "🛍️ Marketeurs & Créateurs de contenu",
  marketerDesc: "Planifiez du contenu social, imaginez des campagnes et rédigez des brouillons de blogs facilement.",
  developerTitle: "🧑‍💻 Développeurs & Technophiles",
  developerDesc: "Notez des extraits de code, écrivez du pseudocode et consignez des idées ou bugs pendant vos recherches ou développements.",
        footerPrivacy: "Politique de confidentialité", footerTerms: "Conditions d'utilisation", footerContact: "Contactez-nous", footerSupport: "Soutenez-nous"
      },
      ru: {
        addBtn: "Добавить в Chrome", loginBtn: "Войти", pricingBtn: "Цены", aboutBtn: "О нас",
        headline: "Повышайте продуктивность", subtext: "Ваш помощник для мозгового штурма",
        featuresTitle: "✨ Функции", feature1: "🧠 Генерация идей с ИИ", feature2: "📝 Организуйте свои заметки",
        feature3: "📁 Экспорт и импорт", feature4: "⚡ Быстрая работа",
        howTitle: "📌 Как это работает", step1: "Установите расширение", step2: "Нажмите на иконку",
        step3: "Создайте или напишите", step4: "Сохраните заметки",
        usecasesTitle: "🎯 Идеально для", studentTitle: "🧑‍🎓 Студенты", studentDesc: "Идеи и заметки для учебы",
        writerTitle: "✍️ Писатели", writerDesc: "Преодолейте творческие блоки", entrepreneurTitle: "💡 Предприниматели",
        professionalTitle: "👔 Профессионалы и Работодатели",
        professionalDesc: "Упрощайте отчёты, готовьтесь к встречам, пишите письма и генерируйте идеи для улучшения команды.",
        entrepreneurDesc: "Записывайте идеи и фичи", ctaTitle: "Готовы начать?", ctaDesc: "Установите Brainstorm Buddy",
       marketerTitle: "🛍️ Маркетологи и Контент-криэйторы",
  marketerDesc: "Планируйте контент для соцсетей, придумывайте кампании и черновики статей без усилий.",
  developerTitle: "🧑‍💻 Разработчики и Техники",
  developerDesc: "Записывайте сниппеты кода, пишите псевдокод и фиксируйте идеи или баги во время работы и исследований.",
        footerPrivacy: "Политика конфиденциальности", footerTerms: "Условия использования", footerContact: "Связаться с нами", footerSupport: "Поддержать нас"
      },
      it: {
        addBtn: "Aggiungi a Chrome", loginBtn: "Accedi", pricingBtn: "Prezzi", aboutBtn: "Chi siamo",
        headline: "Aumenta la produttività", subtext: "Estensione per brainstorming intelligente",
        featuresTitle: "✨ Caratteristiche", feature1: "🧠 Genera idee con l'IA", feature2: "📝 Organizza le tue note",
        feature3: "📁 Esporta o importa", feature4: "⚡ Veloce e leggera",
        howTitle: "📌 Come funziona", step1: "Installa l'estensione", step2: "Clicca sull'icona",
        step3: "Genera o scrivi", step4: "Salva le note",
        usecasesTitle: "🎯 Perfetto per", studentTitle: "🧑‍🎓 Studenti", studentDesc: "Appunti e idee per lo studio",
        writerTitle: "✍️ Scrittori", writerDesc: "Supera i blocchi creativi", entrepreneurTitle: "💡 Imprenditori",
        professionalTitle: "👔 Professionisti e Datori di lavoro",
        professionalDesc: "Snellisci i report, prepara riunioni, scrivi email e genera idee per migliorare il team.",
        entrepreneurDesc: "Scrivi idee di business", ctaTitle: "Pronto ad agire?", ctaDesc: "Installa Brainstorm Buddy",
        marketerTitle: "🛍️ Marketer e Creatori di Contenuti",
  marketerDesc: "Pianifica post social, idee di campagne e bozze di blog senza sforzo.",
  developerTitle: "🧑‍💻 Sviluppatori & Tecnici",
  developerDesc: "Annota snippet di codice, scrivi pseudocodice e registra idee o bug durante la ricerca o lo sviluppo.",
        footerPrivacy: "Privacy", footerTerms: "Termini", footerContact: "Contattaci", footerSupport: "Sostienici"
      },
      pt: {
        addBtn: "Adicionar ao Chrome", loginBtn: "Entrar", pricingBtn: "Preços", aboutBtn: "Sobre",
        headline: "Aumente sua produtividade", subtext: "Extensão de anotações inteligentes com IA.",
        featuresTitle: "✨ Recursos", feature1: "🧠 Geração de ideias com IA", feature2: "📝 Organize suas notas",
        feature3: "📁 Exporte ou importe", feature4: "⚡ Rápida e leve",
        howTitle: "📌 Como funciona", step1: "Instale a extensão", step2: "Clique no ícone",
        step3: "Gere ou escreva ideias", step4: "Salve suas anotações",
        usecasesTitle: "🎯 Perfeito para", studentTitle: "🧑‍🎓 Estudantes", studentDesc: "Ideias e resumos",
        writerTitle: "✍️ Escritores", writerDesc: "Supere bloqueios criativos", entrepreneurTitle: "💡 Empreendedores",
        professionalTitle: "👔 Profissionais e Empregadores",
        professionalDesc: "Otimize relatórios, prepare reuniões, escreva e-mails e gere ideias para melhorar a equipe.",
        entrepreneurDesc: "Anote ideias de negócios", ctaTitle: "Pronto para agir?", ctaDesc: "Instale agora",
        marketerTitle: "🛍️ Profissionais de Marketing & Criadores de Conteúdo",
  marketerDesc: "Planeje posts para redes sociais, campanhas e rascunhos de blogs com facilidade.",
  developerTitle: "🧑‍💻 Desenvolvedores & Técnicos",
  developerDesc: "Anote trechos de código, escreva pseudocódigo e registre ideias ou bugs durante pesquisas ou desenvolvimento.",
        footerPrivacy: "Política de Privacidade", footerTerms: "Termos de Uso", footerContact: "Contato", footerSupport: "Apoie-nos"
      }
    };

    function changeLanguage(lang) {
      const t = translations[lang];
      if (t) {
        for (const key in t) {
          const el = document.getElementById(key);
          if (el) el.textContent = t[key];
        }
      }
      localStorage.setItem('selectedLanguage', lang);
    }

    function toggleDarkMode() {
      document.body.classList.toggle('dark');
    }

    function toggleProfileMenu() {
      const menu = document.getElementById("profile-dropdown");
      if (menu) menu.style.display = menu.style.display === "block" ? "none" : "block";
    }

    function logout() {
      localStorage.removeItem("isLoggedIn");
      localStorage.removeItem("profileImage");
      localStorage.removeItem("userPlan");
      localStorage.removeItem("userEmail");
      localStorage.removeItem("token");
      location.reload();
    }

    // Format plan coming from /api/subscription-status
    function formatPlan(plan){
      const p = String(plan || '').toLowerCase();
      if (!p || p === 'free') return 'Free';
      return p.charAt(0).toUpperCase() + p.slice(1);
    }

    async function fetchCurrentPlan(email){
      try{
        const res = await fetch(`${API_BASE}/api/subscription-status?email=${encodeURIComponent(email)}`);
        if(!res.ok) throw new Error(`HTTP ${res.status}`);
        const data = await res.json();
        return formatPlan(data?.plan || 'Free');
      }catch(err){
        console.warn('Plan fetch failed:', err);
        return 'Free';
      }
    }

    // Update the dropdown “Plan: ...” and any #current-plan on the page
    async function refreshHeaderPlan(){
      const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
      const email = localStorage.getItem('userEmail') || '';
      if(!isLoggedIn || !email) return;

      const plan = await fetchCurrentPlan(email);
      localStorage.setItem('userPlan', plan);
      document.querySelectorAll('.plan-label span, #current-plan').forEach(el => el.textContent = plan);
    }

    document.addEventListener("DOMContentLoaded", async function () {
      // Language setup
      const lang = localStorage.getItem('selectedLanguage') || 'en';
      changeLanguage(lang);

      // Buttons
      document.getElementById("addBtn")?.addEventListener("click", () => {
        window.open("https://chromewebstore.google.com/", "_blank");
      });
      document.getElementById("loginBtn")?.addEventListener("click", () => { location.href = "login.html"; });
      document.getElementById("pricingBtn")?.addEventListener("click", () => { location.href = "pricing.html"; });
      document.getElementById("aboutBtn")?.addEventListener("click", () => { location.href = "about.html"; });

      // Login state & header avatar
      const isLoggedIn = localStorage.getItem("isLoggedIn") === "true";
      const profileImage = localStorage.getItem("profileImage") || "default-avatar.png";
      const cachedPlan = localStorage.getItem("userPlan") || "Free";

      if (isLoggedIn) {
        // Hide login button
        const loginBtn = document.getElementById("loginBtn");
        if (loginBtn) loginBtn.style.display = "none";

        // Insert profile avatar with cached plan first
        const navRight = document.querySelector(".nav-right");
        const profileDiv = document.createElement("div");
        profileDiv.className = "profile-container";
        profileDiv.innerHTML = `
          <div style="position: relative;">
            <button class="profile-trigger" onclick="toggleProfileMenu()" style="border: none; background: none;">
              <img id="profile-img" src="${profileImage}" alt="Profile" style="width: 32px; height: 32px; border-radius: 50%;">
            </button>
            <div class="profile-dropdown-content" id="profile-dropdown" style="display: none; position: absolute; right: 0; top: 2.5rem; background: white; color: #333; border-radius: 6px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); z-index: 10; min-width: 200px;">
              <div class="plan-label" style="padding: 0.6rem 1rem;">
                Plan: <span>${cachedPlan}</span>
              </div>
              <a href="billing.html" style="display:block; padding:0.6rem 1rem; text-decoration:none; color:#333;">Billing & Plan</a>
              <a href="#" onclick="logout()" style="display:block; padding:0.6rem 1rem; text-decoration:none; color:#333;">Logout</a>
            </div>
          </div>
        `;
        navRight.appendChild(profileDiv);

        // Now fetch & update with the authoritative plan from the server
        await refreshHeaderPlan();
      }
    });

    // Keep plan fresh when returning to the page/tab
    window.addEventListener('focus', refreshHeaderPlan);
    document.addEventListener('visibilitychange', () => { if (!document.hidden) refreshHeaderPlan(); });

    // Close dropdown when clicking outside
    window.addEventListener("click", function (e) {
      if (!e.target.closest(".profile-container")) {
        const menu = document.getElementById("profile-dropdown");
        if (menu) menu.style.display = "none";
      }
    });
  </script>
</body>
</html>
